This repository lets your ROS software communicate with IOP services. You can find an overview of all supported services at [doc/other_packages.md](doc/other_packages.md).
| IOP package      |  Kinetic / Melodic / Noetic | Foxy / Galactic |
| ---              | --- | --- |
| iop_core         |  [![master](https://travis-ci.org/fkie/iop_core.svg?branch=master)](https://travis-ci.org/fkie/iop_core) | [![ros2](https://github.com/fkie/iop_core/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_core/actions) |
| [iop_msgs](https://github.com/fkie/iop_msgs) | [![Build Status](https://travis-ci.org/fkie/iop_msgs.svg?branch=master)](https://travis-ci.org/fkie/iop_msgs) | [![ros2](https://github.com/fkie/iop_msgs/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_msgs/actions) |
| [iop_platform](https://github.com/fkie/iop_platform) | [![Build Status](https://travis-ci.org/fkie/iop_platform.svg?branch=master)](https://travis-ci.org/fkie/iop_platform) | [![ros2](https://github.com/fkie/iop_platform/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_platform/actions) |
| [iop_sensing](https://github.com/fkie/iop_sensing) | [![Build Status](https://travis-ci.org/fkie/iop_sensing.svg?branch=master)](https://travis-ci.org/fkie/iop_sensing) | [![ros2](https://github.com/fkie/iop_sensing/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_sensing/actions) |
| [iop_sensing_clients](https://github.com/fkie/iop_sensing_clients) | [![Build Status](https://travis-ci.org/fkie/iop_sensing_clients.svg?branch=master)](https://travis-ci.org/fkie/iop_sensing_clients) | [![ros2](https://github.com/fkie/iop_sensing_clients/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_sensing_clients/actions) |
| [iop_gui](https://github.com/fkie/iop_gui) | [![Build Status](https://travis-ci.org/fkie/iop_gui.svg?branch=master)](https://travis-ci.org/fkie/iop_gui) | [![ros2](https://github.com/fkie/iop_gui/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_gui/actions) |
| [iop_jaus_manipulator](https://github.com/fkie/iop_jaus_manipulator) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_manipulator.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_manipulator) | |
| [iop_jaus_manipulator_clients](https://github.com/fkie/iop_jaus_manipulator_clients) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_manipulator_clients.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_manipulator_clients) ||
| [iop_jaus_mobility](https://github.com/fkie/iop_jaus_mobility) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_mobility.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_mobility) | [![ros2](https://github.com/fkie/iop_jaus_mobility/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_mobility/actions) |
| [iop_jaus_mobility_clients](https://github.com/fkie/iop_jaus_mobility_clients) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_mobility_clients.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_mobility_clients) | [![ros2](https://github.com/fkie/iop_jaus_mobility_clients/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_mobility_clients/actions) |
| [iop_jaus_sensing](https://github.com/fkie/iop_jaus_sensing) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_sensing.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_sensing) | [![ros2](https://github.com/fkie/iop_jaus_sensing/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_sensing/actions) |
| [iop_jaus_sensing_clients](https://github.com/fkie/iop_jaus_sensing_clients) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_sensing_clients.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_sensing_clients) | [![ros2](https://github.com/fkie/iop_jaus_sensing_clients/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_sensing_clients/actions) |
| [iop_jaus_ugv](https://github.com/fkie/iop_jaus_ugv) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_ugv.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_ugv) | [![ros2](https://github.com/fkie/iop_jaus_ugv/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_ugv/actions) |
| [iop_jaus_ugv_clients](https://github.com/fkie/iop_jaus_ugv_clients) | [![Build Status](https://travis-ci.org/fkie/iop_jaus_ugv_clients.svg?branch=master)](https://travis-ci.org/fkie/iop_jaus_ugv_clients) | [![ros2](https://github.com/fkie/iop_jaus_ugv_clients/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_jaus_ugv_clients/actions) |
| [iop_examples](https://github.com/fkie/iop_examples) | [![Build Status](https://travis-ci.org/fkie/iop_examples.svg?branch=master)](https://travis-ci.org/fkie/iop_examples) | [![ros2](https://github.com/fkie/iop_examples/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_examples/actions)|
| [iop_node_manager](https://github.com/fkie/iop_node_manager) | [![Build Status](https://travis-ci.org/fkie/iop_node_manager.svg?branch=master)](https://travis-ci.org/fkie/iop_node_manager) | [![ros2](https://github.com/fkie/iop_node_manager/workflows/CI/badge.svg?branch=ros2)](https://github.com/fkie/iop_node_manager/actions) |
| [iop_wireshark_plugin](https://github.com/fkie/iop_wireshark_plugin) | [![Build Status](https://travis-ci.org/fkie/iop_wireshark_plugin.svg?branch=master)](https://travis-ci.org/fkie/iop_wireshark_plugin) ||


# Installation of the ROS/IOP Bridge

## Install dependencies for JAUS Toolset

ROS/IOP Bridge uses JAUS Toolset (JTS) to generate basic C++ code from JSIDL definitions of JAUS. You find the JAUS Toolset desciption [here](http://jaustoolset.org/). Currently only a part of sources of JTS is used.
This part will build while you build the ROS/IOP Bridge sources. For successful build JTS needs follow external software:

Install OpenJKD:

```console
sudo apt-get install default-jdk -y
```

>If you prefer Oracle Java, see [here](doc/install_oracle_java.md)

## Set up your ROS environment

Make sure, that your ROS workspace is set up correctly:

- Using [Creating a workspace](https://docs.ros.org/en/jazzy/Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html)

For easier download of bridge packages install **[vcstool](https://wiki.ros.org/vcstool)**:

```console
sudo apt-get install vcstool -y
```

----

## Download the ROS/IOP-Bridge packages

The sourcecode of the ROS/IOP-Bridge is splitted into different Git repositories. Depending on your configuration you need a different set of packages. An overview of existing packages you find [here](doc/other_packages.md)

For download the ROS/IOP-Bridge sources we use the [vcstool](https://wiki.ros.org/vcstool):

Merge the iop.rosinstall file and fetch code.

```console
cd ros/
mkdir src/iop
vcs import --input https://raw.githubusercontent.com/fkie/iop_core/refs/heads/ros2/iop_robot.rosinstall src/iop
```

## Install dependencies

Go to the root folder of your ROS workspace and type:

```console
rosdep install --from-paths src --ignore-src
```

## Build the sources

Go to the root folder of your ROS workspace and type:

```console
colcon build --symlink-install
```

>If some errors occur while JTS build regarding missing *pthread* and *timer* the *libpthread* and *librt* have to be included. This can be done by replacing LIBS=[] by LIBS=['-lpthread', '-lrt'] in   *jaustoolset/GUI/templates/Common/SConstruct*

## Additional Information

For convenient usage of ROS environment use the `mas gui` of `fkie-multi-agent-suite`. You can install it from  [https://github.com/fkie/fkie-multi-agent-suite](https://github.com/fkie/fkie-multi-agent-suite/).

On each host you run IOP components you need to start a ``Node Manager``. There are two alternatives:

### 1. JTSNodeManager

This _Node Manager_ is part of JausToolSet and included in **iop_core**. You can start this Node Manager with following command:

```console
bash rosrun jaustoolset jaus_node_manager.sh start
```

>To exit the script press `CTRL+C` or type `bash rosrun jaustoolset jaus_node_manager.sh stop` in a new terminal window.
>See example below how to integrate the JTS-`nodeManager`into launch-file.

### 2. IOPNodeManager

This Node Manager is written in Python and is an alternative development to JTSNodeManager. You need to install it as separate package from [https://github.com/fkie/iop_node_manager](https://github.com/fkie/iop_node_manager) using

```console
wstool merge -t src/iop https://raw.githubusercontent.com/fkie/iop_node_manager/master/iop_node_manager.rosinstall
wstool update -t src/iop
catkin build
```

## Example

For a simple example with turtlesim see [fkie_iop_cfg_sim_turtle](https://github.com/fkie/iop_examples/blob/master/fkie_iop_cfg_sim_turtle/README.md) package.

You find other examples in [iop_examples](https://github.com/fkie/iop_examples) repository.

----

## [How it works - an overview](doc/how_it_works.md)

## [IOP packages - an overview](doc/other_packages.md)

## [IOP core packages](doc/iop_core_packages.md)

## [Builder-package](fkie_iop_builder/README.md)

## [How to start with own configuration](doc/howto_minimal_config.md)

## [How to create own plugin](doc/howto_create_plugin.md)
